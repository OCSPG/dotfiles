# Minimal gaming-optimized Hyprland config

# Monitor configuration (machine-specific)
source = ~/.config/hypr/hyprmonitor.conf

# Programs
$terminal = kitty
$menu = walker --theme catppuccin

# Autostart
exec-once = uwsm app -- wl-paste --type text --watch cliphist store
exec-once = uwsm app -- wl-paste --type image --watch cliphist store
exec-once = hyprctl setcursor Bibata-Modern-Ice 24
exec-once = uwsm app -- waypaper --random
exec-once = uwsm app -- walker --gapplication-service
exec-once = uwsm app -- waybar

# Gaming optimizations
general {
    allow_tearing = true
    layout = dwindle
    gaps_in = 2
    gaps_out = 2
    border_size = 2
    
    # Catppuccin Mocha + Lavender
    col.active_border = rgb(b4befe)
    col.inactive_border = rgb(313244)
}

# Minimal visual effects for performance
decoration {
    rounding = 5
    blur {
        enabled = true
        size = 3
        passes = 1
        ignore_opacity = false
    }
    shadow {
        enabled = false
    }
}

render {
direct_scanout = 1
}

# Animations disabled
animations {
    enabled = false
}

# Input - no mouse acceleration
input {
    kb_layout = de
    follow_mouse = 1
    sensitivity = 0
    accel_profile = flat
    force_no_accel = true
}

xwayland {
  force_zero_scaling = true
}

# Essential keybinds
$mainMod = SUPER

bind = $mainMod, Q, exec, uwsm app -- $terminal
bind = $mainMod, C, killactive,
bind = $mainMod, M, exec, uwsm stop
bind = $mainMod, T, togglefloating,
bind = $mainMod, F, fullscreen,
bind = $mainMod, R, exec, uwsm app -- $menu
bind = $mainMod, E, exec, uwsm app -- thunar
bind = $mainMod, space, exec, uwsm app -- walker --modules finder --theme catppuccin
bind = $mainMod, V, exec, uwsm app -- sh -c "cliphist list | walker --dmenu --theme catppuccin | cliphist decode | wl-copy"
bind = $mainMod CTRL, W, exec, uwsm app -- walker --modules websearch --theme catppuccin
bind = $mainMod, K, exec, uwsm app -- /home/max/.local/bin/hypr-keybinds

# Screenshots
bind = $mainMod SHIFT, S, exec, uwsm app -- sh -c "grim -g \"$(slurp)\" - | satty --filename - --fullscreen --output-filename /home/max/Pictures/Screenshots/screenshot_$(date +%Y%m%d_%H%M%S).png"

# Lock screen
bind = $mainMod, L, exec, uwsm app -- hyprlock

# Power menu
bind = $mainMod SHIFT, E, exec, uwsm app -- wlogout

# Color picker
bind = $mainMod, P, exec, uwsm app -- hyprpicker -a

# Reload configs
bind = $mainMod CTRL, R, exec, /home/$USER/Scripts/hyprland/reload-configs.sh

# Media keys
bind = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bind = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bind = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bind = , XF86AudioPlay, exec, playerctl play-pause
bind = , XF86AudioNext, exec, playerctl next
bind = , XF86AudioPrev, exec, playerctl previous


# Brightness (if available)
bind = , XF86MonBrightnessUp, exec, brightnessctl set 10%+
bind = , XF86MonBrightnessDown, exec, brightnessctl set 10%-

# Alt-tab functionality
bind = ALT, Tab, cyclenext,
bind = ALT SHIFT, Tab, cyclenext, prev

# Window movement (WASD)
bind = $mainMod, W, movewindow, u
bind = $mainMod, A, movewindow, l
bind = $mainMod, S, movewindow, d
bind = $mainMod, D, movewindow, r

# Focus movement (Alt + WASD)
bind = $mainMod ALT, W, movefocus, u
bind = $mainMod ALT, A, movefocus, l
bind = $mainMod ALT, D, movefocus, r

# Workspace switching
bind = $mainMod SHIFT, A, workspace, e-1
bind = $mainMod SHIFT, D, workspace, e+1

# Workspaces
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Mouse window controls
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Audio controls
bind = $mainMod CTRL, L, exec, /home/$USER/Scripts/audio/toggle-laptop-audio.sh

# Gaming window rules
windowrulev2 = immediate, class:^(steam_app).*$
windowrulev2 = immediate, class:^(gamescope).*$
windowrulev2 = noborder, class:^(steam_app).*$
windowrulev2 = noshadow, class:^(steam_app).*$
windowrulev2 = noblur, class:^(steam_app).*$

# Application-specific rules
windowrulev2 = float, class:^(kitty)$, title:^(floating).*$
windowrulev2 = size 800 600, class:^(kitty)$, title:^(floating).*$
windowrulev2 = center, class:^(kitty)$, title:^(floating).*$

# Media applications
windowrulev2 = float, class:^(celluloid)$
windowrulev2 = size 1200 800, class:^(celluloid)$
windowrulev2 = center, class:^(celluloid)$

# Image viewer
windowrulev2 = float, class:^(image-roll)$
windowrulev2 = center, class:^(image-roll)$

# File manager  
windowrulev2 = float, class:^(thunar)$
windowrulev2 = size 1000 700, class:^(thunar)$
windowrulev2 = center, class:^(thunar)$

# LibreOffice floating dialogs
windowrulev2 = float, class:^(libreoffice).*$, title:^(.*Properties|.*Settings|.*Preferences).*$

# Force Thorium app windows to tile
windowrule = tile, class:^(Thorium-browser)$

# General rules
windowrule = suppressevent maximize, class:.*

# Disable default wallpaper
misc {
    force_default_wallpaper = 0
    disable_hyprland_logo = true
}


# Overlay toggle
bind = SHIFT, Tab, exec, /home/max/.config/eww/toggle-overlay

# Overlay window rules
windowrulev2 = float, class:^(com.github.hyprland-overlay)$
windowrulev2 = pin, class:^(com.github.hyprland-overlay)$
windowrulev2 = noborder, class:^(com.github.hyprland-overlay)$
windowrulev2 = nofocus, class:^(com.github.hyprland-overlay)$
layerrule = blur, hyprland-overlay
layerrule = ignorealpha 0.3, hyprland-overlay


# Widget positioning rules with simpler syntax
windowrulev2 = float, title:^(Overlay Widget).*$
windowrulev2 = noborder, title:^(Overlay Widget).*$
windowrulev2 = nofocus, title:^(Overlay Widget).*$
